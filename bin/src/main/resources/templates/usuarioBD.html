<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">

		<link rel="stylesheet" type="text/css" href="css/animate.css">
		
		<title>Usuario BD</title>
<!-- 		Impongo el estilo que le quiero dar a la pagina -->
		<style>
		h1{
			color:White;
		}
		#camion{
		color:#F1C40F;
		}
		.cuerpoBD{
	background-image: url(../img/fondo-camion.jpg);
    background-blend-mode: soft-light;
    background-color: rgb(35, 50, 37);
    background-size: 100%;
    background-position:center;
    background-repeat: no-repeat;
		}
		.table-striped{
			color: white;
		
		}
		body header{
				color: #00ff80;
				text-align: center;
		}
		h2{
			color: white;
		}
		.table-striped td{
				text-align: center;
			
		}
		.table-striped tr{
				text-align: center;
		}
		.btn-warning{
			background: #37e1d9;
		}
		btn-danger{
			background: #ff0000;
		}
		#titulos{
		color: #F1C40F;
		}
			</style>
	</head>
<!-- 	cuerpo de la pagina -->
	<body class="cuerpoBD">
		<div th:insert="layout/headerUsuarioBD :: header"></div>
		<div class="container">
			<header>
<!-- 			titulo bienvenida -->
				<h1 class="animated bounce">Bienvenido UsuarioBd!</h1>
				<div class="col-sm-12 row d-flex justify-content-center align-items-center m-0 p-4">
				<ul class="h6">
<!-- 				opciones -->
				<p>Como usuario Bd podra realizar las siguientes funciones: </p>
					<li>Realizar el ABM de los Usuarios y localidades</li>
					<li>Modificar o eliminar cuaquier usuario o localidad</li>
					<li>Agregar Nuevas Localidades</li>
				</ul>
				</div>
	
				<div id="camion" class="animated infinite headShake">
				 <svg class="bi bi-truck" width="6em" height="6em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
			  	<path fill-rule="evenodd" d="M0 3.5A1.5 1.5 0 0 1 1.5 2h9A1.5 1.5 0 0 1 12 3.5v7h-1v-7a.5.5 0 0 0-.5-.5h-9a.5.5 0 0 0-.5.5v7a.5.5 0 0 0 .5.5v1A1.5 1.5 0 0 1 0 10.5v-7zM4.5 11h6v1h-6v-1z"/>
			  		<path fill-rule="evenodd" d="M11 5h2.02a1.5 1.5 0 0 1 1.17.563l1.481 1.85a1.5 1.5 0 0 1 .329.938V10.5a1.5 1.5 0 0 1-1.5 1.5h-1v-1h1a.5.5 0 0 0 .5-.5V8.35a.5.5 0 0 0-.11-.312l-1.48-1.85A.5.5 0 0 0 13.02 6H12v4.5h-1V5zm-8 8a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 1a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/>
			  		<path fill-rule="evenodd" d="M12 13a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 1a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/>
					</svg>  
					</div>
			</header>		
<!-- 			Pestañas de Opciones	 -->
			<ul class="nav nav-tabs nav-justified col-sm-12" role="tablist">
				<li class="nav-item">
					<a id="usuario-tab"	th:classappend="${usuariosTab}" class="nav-link show" href="#usuario"
					data-toggle="tab" role="tab" aria-controls="usuario" aria-selected="true">Listado de Usuarios</a>
				</li>
					
				<li class="nav-item">
					<a id="localidad-tab" class="nav-link show" th:classappend="${localidadesTab}" href="#localidad" data-toggle="tab"
					role="tab" aria-controls="localidad" aria-selected="false">Listado de Localidades</a>
				</li>
					
				<li class="nav-item">
					<a id="agregarUsuario-tab"	th:classappend="${agregarUTab}" class="nav-link show" href="#agregarUsuario"
					data-toggle="tab" role="tab" aria-controls="agregarUsuario" aria-selected="true">Agregar nuevo Usuario</a>
				</li>
					
				<li class="nav-item">
					<a id="agregarLocalidad-tab" th:classappend="${agregarLTab}" class="nav-link show" href="#agregarLocalidad" data-toggle="tab"
					role="tab" aria-controls="agregarLocalidad" aria-selected="false">Agregar nueva Localidad</a>
				</li>
			</ul>
<!-- 			Espacio -->
			<br>
				 		
			<div class="tab-content">
<!-- 			Listado de usuarios -->
				<div class="tab-pane fade show " id="usuario" th:classappend="${usuariosTab}" role="tabpanel" aria-labelledby="usuario-tab">
				<h2 id="titulos" class="animated zoomInDown">Usuarios Registrados</h2>
					<div class="table-responsive">
						<table class="table table-striped">
					  		<thead>
							    <tr>
							      <th scope="col">ID usuario</th>
							      <th scope="col">Nombre de Usuario</th>
							      <th scope="col">Nombre Real</th>
							      <th scope="col">Apellido Real</th>
							      <th scope="col">Tipo de Usuario</th>
							      <th scope="col">Acciones</th>
							    </tr>
					  		</thead>
							 <tbody>
							    <tr th:each = "usuario:${usuarios}">
							      <td th:text = "${usuario.id}"></td>
							      <td th:text = "${usuario.nombreUsuario}"></td>
							      <td th:text = "${usuario.nombreReal}"></td>
							      <td th:text = "${usuario.apellidoReal}"></td>
							      <td th:text = "${usuario.tipoUsuario}"></td>
							      <td>
							      	<a th:href="@{/editar/}+${usuario.id}" class="btn btn-warning"><svg class="bi bi-pencil" width="1.2em" height="1.2em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
									  <path fill-rule="evenodd" d="M11.293 1.293a1 1 0 0 1 1.414 0l2 2a1 1 0 0 1 0 1.414l-9 9a1 1 0 0 1-.39.242l-3 1a1 1 0 0 1-1.266-1.265l1-3a1 1 0 0 1 .242-.391l9-9zM12 2l2 2-9 9-3 1 1-3 9-9z"/>
									  <path fill-rule="evenodd" d="M12.146 6.354l-2.5-2.5.708-.708 2.5 2.5-.707.708zM3 10v.5a.5.5 0 0 0 .5.5H4v.5a.5.5 0 0 0 .5.5H5v.5a.5.5 0 0 0 .5.5H6v-1.5a.5.5 0 0 0-.5-.5H5v-.5a.5.5 0 0 0-.5-.5H3z"/>
									</svg></a>
							      	<a th:onclick="'javascript:confirmarEliminarUser(\''+${usuario.id}+'\');'" data-toggle="modal" data-target="#eliminarUsuario" th:href="@{/eliminar/}+${usuario.id}" class="btn btn-danger"><svg class="bi bi-trash-fill" width="1.2em" height="1.2em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
			  						<path fill-rule="evenodd" d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5a.5.5 0 0 0-1 0v7a.5.5 0 0 0 1 0v-7z"/>
									</svg></a>
							      </td>
							    </tr>
							 </tbody>
						</table>
					</div>
				</div>
<!-- 				Listado de Localidades -->
				<div class="tab-pane fade show" id="localidad" role="tabpanel" th:classappend="${localidadesTab}" aria-labelledby="localidad-tab">
				<h2 id="titulos" class="animated zoomInLeft">Localidades Registradas</h2>
					<div class="table-responsive">
						<table class="table table-striped">
						  <thead>
						    <tr>
						      <th scope="col">ID Localidad</th>
						      <th scope="col">Nombre de Localidad</th>
						      <th scope="col">Acciones</th>
						    </tr>
						  </thead>
						  <tbody>
						  	<tr th:each = "localidad:${localidades}">
							    <td th:text = "${localidad.id}"></td>
							    <td th:text = "${localidad.nombre}"></td>
							    <td>
							      	<a th:href="@{/editarloc/}+${localidad.id}" class="btn btn-warning"><svg class="bi bi-pencil" width="1.2em" height="1.2em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
									  <path fill-rule="evenodd" d="M11.293 1.293a1 1 0 0 1 1.414 0l2 2a1 1 0 0 1 0 1.414l-9 9a1 1 0 0 1-.39.242l-3 1a1 1 0 0 1-1.266-1.265l1-3a1 1 0 0 1 .242-.391l9-9zM12 2l2 2-9 9-3 1 1-3 9-9z"/>
									  <path fill-rule="evenodd" d="M12.146 6.354l-2.5-2.5.708-.708 2.5 2.5-.707.708zM3 10v.5a.5.5 0 0 0 .5.5H4v.5a.5.5 0 0 0 .5.5H5v.5a.5.5 0 0 0 .5.5H6v-1.5a.5.5 0 0 0-.5-.5H5v-.5a.5.5 0 0 0-.5-.5H3z"/>
									</svg></a>
							      	<a th:onclick="'javascript:confirmarEliminar(\''+${localidad.id}+'\');'" data-toggle="modal" data-target="#eliminarLocalidad" th:href="@{/eliminarloc/}+${localidad.id}" class="btn btn-danger"><svg class="bi bi-trash-fill" width="1.2em" height="1.2em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
			  						<path fill-rule="evenodd" d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5a.5.5 0 0 0-1 0v7a.5.5 0 0 0 1 0v-7z"/>
									</svg></a>
							     </td>
						    </tr>
						 </tbody>
						</table>
					</div>
				</div>
<!-- 				Registro de Usuario -->
				<div class="tab-pane fade show" id="agregarUsuario" role="tabpanel" th:classappend="${agregarUTab}" aria-labelledby="agregarUsuario-tab" >
					<div class="card">
						<div class="card-header">
							<h4 class="animated bounceInRight">Registrar Usuario</h4>
						</div>
						
						<div class="card-body">
							<form id="form" th:object="${registroUsuario}" th:action="@{/saveUsuario}" method="post">  
							  <div class="form-row">
							    <div class="form-group col-md-6">
							      <label for="inputNombreUsuario">Nombre Usuario</label>
							      <input th:field="${registroUsuario.nombreUsuario}" type="text" class="form-control" id="inputNombreUsuario" placeholder="Ingrese Nombre de Usuario">
							      <div class="alert-danger" th:if="${#fields.hasErrors('nombreUsuario')}" th:errors="*{nombreUsuario}">Name Error</div>
							    </div>
							    <div class="form-group col-md-6">
							      <label for="inputPassword4">Password</label>
							      <input th:field="${registroUsuario.password}" type="password" class="form-control" id="inputPassword4" placeholder="Ingrese Password">
							      <div class="alert-danger" th:if="${#fields.hasErrors('password')}" th:errors="*{password}">Name Error</div>
							    </div>
							  </div>
							  <div class="form-group">
							    <label for="inputNombreReal">Nombre Real</label>
							    <input th:field="${registroUsuario.nombreReal}" type="text" class="form-control" id="inputNombreReal" placeholder="Ingrese Nombre Real">
							  <div class="alert-danger" th:if="${#fields.hasErrors('nombreReal')}" th:errors="*{nombreReal}">Name Error</div>
							  </div>
							  <!-- mensaje de error -->
							 <div th:if="${mensajeErrorUs2==true}" class="col-sm-12 mt-4 h5 font-weight-lighter">
							 <div class="alert alert-danger text-center" th:text="${errorUsuario2}"></div>
							 </div>
							  <!-- mensaje de error -->
							<div th:if="${mensajeErrorUs3==true}" class="col-sm-12 mt-4 h5 font-weight-lighter">
							<div class="alert alert-danger text-center" th:text="${errorUsuario3}"></div>
							</div>
							  <div class="form-group">
							  <label for="inputApellidoReal">Apellido Real</label>
							  <input th:field="${registroUsuario.apellidoReal}" type="text" class="form-control" id="inputApellidoReal" placeholder="Ingrese Apellido Real">
							  <div class="alert-danger" th:if="${#fields.hasErrors('apellidoReal')}" th:errors="*{apellidoReal}">Name Error</div>
							  </div>  
								<!-- mensaje de error -->
							 <div th:if="${mensajeErrorUs2b==true}" class="col-sm-12 mt-4 h5 font-weight-lighter">
							 <div class="alert alert-danger text-center" th:text="${errorUsuario2b}"></div>
							 </div>
							<!-- mensaje de error -->
							<div th:if="${mensajeErrorUs3b==true}" class="col-sm-12 mt-4 h5 font-weight-lighter">
							<div class="alert alert-danger text-center" th:text="${errorUsuario3b}"></div>
							</div>
							  Tipo de Usuario
							  </br>
							  </br>
							  <div class="form-check form-check-inline">
								  <input th:field="${registroUsuario.tipoUsuario}" class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios1" value="REGISTRADOR" checked>
								  <label class="form-check-label" for="exampleRadios1">
								   Usuario Registrador
								  </label>
							  </div>
							  <div class="form-check form-check-inline">
								  <input th:field="${registroUsuario.tipoUsuario}" class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios2" value="CONSULTOR">
								  <label class="form-check-label" for="exampleRadios2">
								   Usuario Consultor
								  </label>
							   </div>
							   <div class="form-check form-check-inline">
								  <input th:field="${registroUsuario.tipoUsuario}" class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios3" value="BD">
								  <label class="form-check-label" for="exampleRadios3">
								   Usuario Bd
								  </label>
								</div>
								<div class="alert-danger" th:if="${#fields.hasErrors('tipoUsuario')}" th:errors="*{tipoUsuario}">Name Error</div>
								</br>
							    </br>								
								<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#modalAgregar">Guardar Usuario</button>
							  	<div class="alert-danger text-center" th:if="${formUsuarioErrorMessage}" th:text="${formUsuarioErrorMessage}">Name Error</div>
							<!-- Modal Agregar -->
											<div class="modal fade" id="modalAgregar" tabindex="-1"	role="dialog" aria-labelledby="agregarModalTitulo"	aria-hidden="true">
												<div class="modal-dialog modal-dialog-centered" role="document">
													<div class="modal-content">
														<div class="modal-header">
															<h5 class="modal-title" id="agregarModalTitulo">Confirmar Agregar</h5>
															<button type="button" class="close" data-dismiss="modal" aria-label="Close">
																<span aria-hidden="true">&times;</span>
															</button>
														</div>
														<div class="modal-body"><h6>¿Estas seguro que quieres agregar un nuevo usuario?</h6></div>
														<div class="modal-footer">
															<button type="button" class="btn btn-secondary"	data-dismiss="modal">Close</button>
															<input type="submit" class="btn btn-primary" value="Save Changes"  th:value="${editMode}?'Guardar Usuario':'Crear Usuario'">
														</div>
													</div>
												</div>
											</div>
									<!-- mensaje de error -->
									<div th:if="${mensajeErrorUs1==true}" class="col-sm-12 mt-4 h5 font-weight-lighter">
										<div class="alert alert-danger text-center" th:text="${errorUsuario1}"></div>
									</div>
							</form>
						</div>
					</div>
				</div>		
<!-- 				Registro de Localidad	 -->
				<div class="tab-pane fade show" id="agregarLocalidad" role="tabpanel" th:classappend="${agregarLTab}" aria-labelledby="agregarLocalidad-tab" >
					<div class="card">
						<div class="card-header">
							<h4 class="animated bounceInRight">Agregar Localidad</h4>
						</div>
						<div class="card-body">
							<form id="form" th:object="${registroLocalidad}" th:action="@{/saveLocalidad}" method="post">
								<div class="form-row">
								<div class="form-group col-md-3">
								</div>
								<div class="form-group col-md-6" id="cuadroLocalidad">
								    <label for="inputNombreLocalidad">Nombre Localidad</label>
								    <input th:field="${registroLocalidad.nombre}" type="text" class="form-control" id="inputNombreLocalidad" placeholder="Ingrese Localidad">
								    <div class="alert-danger" th:if="${#fields.hasErrors('nombre')}" th:errors="*{nombre}">Name Error</div>
								 </div>
							  	<div class="form-group col-md-3">
								</div>
							  <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#modalAgregarLoc">Guardar Localidad</button>
							  <!-- Modal Agregar -->
											<div class="modal fade" id="modalAgregarLoc" tabindex="-1"	role="dialog" aria-labelledby="agregarModalTitulo"	aria-hidden="true">
												<div class="modal-dialog modal-dialog-centered" role="document">
													<div class="modal-content">
														<div class="modal-header">
															<h5 class="modal-title" id="agregarModalTitulo">Confirmar Agregar</h5>
															<button type="button" class="close" data-dismiss="modal" aria-label="Close">
																<span aria-hidden="true">&times;</span>
															</button>
														</div>
														<div class="modal-body"><h6>¿Estas seguro de agregar una nueva Localidad?</h6></div>
														<div class="modal-footer">
															<button type="button" class="btn btn-secondary"	data-dismiss="modal">Cerrar</button>
															<input type="submit" class="btn btn-primary" value="Save Changes" th:value="${editMode}?'Guardar Localidad':'Crear Localidad'">
														</div>
													</div>
												</div>
											</div>	
									<!-- mensaje de error -->
									<div th:if="${mensajeErrorLoc1==true}" class="col-sm-12 mt-4 h5 font-weight-lighter">
										<div class="alert alert-danger text-center" th:text="${errorLocalidad1}"></div>
									</div>
									<!-- mensaje de error -->
									<div th:if="${mensajeErrorLoc2==true}" class="col-sm-12 mt-4 h5 font-weight-lighter">
										<div class="alert alert-danger text-center" th:text="${errorLocalidad2}"></div>
									</div>
									<!-- mensaje de error -->
									<div th:if="${mensajeErrorLoc3==true}" class="col-sm-12 mt-4 h5 font-weight-lighter">
										<div class="alert alert-danger text-center" th:text="${errorLocalidad3}"></div>
									</div>
							</form>
						</div>	
					</div>
				</div>
			</div>
		
				<!-- 	VENTANA MODAL DE CONFIRMACION ELIMINAR USUARIO -->	
								<div class="modal fade" id="eliminarUsuario" tabindex="-1" role="dialog" aria-labelledby="eliminarModalTitulo"	aria-hidden="true">
									<div class="modal-dialog modal-dialog-centered" role="document">
										<div class="modal-content">
											<div class="modal-header">
												<h5 class="modal-title" id="eliminarModalTitulo">Confirmar Eliminar</h5>
												<button type="button" class="close" data-dismiss="modal" aria-label="Close">
													<span aria-hidden="true">&times;</span>
												</button>
											</div>
											<div class="modal-body"><h6>¿Esta seguro de eliminar este Usuario?</h6></div>
											<input type="hidden" id="identificadorUsuarioHiddenInput" name="userIdHiddenInput"/>
											<div class="modal-footer">
												<button type="button" class="btn btn-secondary"	data-dismiss="modal">Cerrar</button>
												<button type="button" class="btn btn-primary" th:onclick="eliminarUsuario()">Eliminar</button>
											</div>
										</div>
									</div>
								
								</div>
								
									<!-- Script -->
									<script type="text/javascript">
									function confirmarEliminarUser(id){
										$('#modalEliminar').modal('show');
										$("#identificadorUsuarioHiddenInput").val(id);
									}
									
									function eliminarUsuario(){
										var id = $("#identificadorUsuarioHiddenInput").val();
									    window.location = "eliminar/"+id;
									}
									</script>
		
		
				<!-- 	VENTANA MODAL DE CONFIRMACION ELIMINAR LOCALIDAD -->					
								<div class="modal fade" id="eliminarLocalidad" tabindex="-1" role="dialog" aria-labelledby="eliminarModalTitulo"	aria-hidden="true">
									<div class="modal-dialog modal-dialog-centered" role="document">
										<div class="modal-content">
											<div class="modal-header">
												<h5 class="modal-title" id="eliminarModalTitulo">Confirmar Eliminar</h5>
												<button type="button" class="close" data-dismiss="modal" aria-label="Close">
													<span aria-hidden="true">&times;</span>
												</button>
											</div>
											<div class="modal-body"><h6>¿Esta seguro de eliminar esta Localidad?</h6></div>
											<input type="hidden" id="identificadorUsuarioHiddenInput" name="userIdHiddenInput"/>
											<div class="modal-footer">
												<button type="button" class="btn btn-secondary"	data-dismiss="modal">Cerrar</button>
												<button type="button" class="btn btn-primary" th:onclick="eliminarLocalidad()">Eliminar</button>
											</div>
										</div>
									</div>
								</div>
								
							<!-- Script -->
									<script type="text/javascript">
									function confirmarEliminar(id){
										$('#modalEliminar').modal('show');
										$("#identificadorUsuarioHiddenInput").val(id);
									}
									
									function eliminarLocalidad(){
										var id = $("#identificadorUsuarioHiddenInput").val();
									    window.location = "eliminarloc/"+id;
									}
									</script>
	
		</div>
			 	<!-- Optional JavaScript -->
	    		<!-- jQuery first, then Popper.js, then Bootstrap JS -->
				<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
				<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
				<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
	</body>
</html>